{"version":3,"file":"static/js/498.6a466e64.chunk.js","mappings":"qPASe,SAASA,EAAQC,GAAuD,IAAtD,SAAEC,EAAQ,MAAEC,EAAK,MAAEC,GAAgCH,EAAtBI,GAAKC,EAAAA,EAAAA,GAAAL,EAAAM,GAClE,OACCC,EAAAA,EAAAA,KAAA,OAAAC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACCC,KAAK,WACLC,OAAQR,IAAUC,EAClBQ,GAAE,mBAAAC,OAAqBT,GACvB,gCAAAS,OAA+BT,IAC3BC,GAAK,IAAAH,SAERC,IAAUC,IAASI,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACC,GAAI,CAAEC,EAAG,GAAId,SAAEA,MAG3C,C,gECPA,MAAMe,EAAY,CAAEC,MAAO,oBAEZ,SAASC,EAAalB,GAAkF,IAAjF,IAAEmB,EAAG,MAAEC,EAAK,WAAEC,EAAU,MAAEC,EAAK,GAAEX,EAAE,SAAEY,EAAQ,UAAEC,GAA+BxB,EACnH,MAAOyB,EAAcC,IAAmBC,EAAAA,EAAAA,WAAS,GAWjD,OACCpB,EAAAA,EAAAA,KAACqB,EAAAA,EAAS,CACTd,GAAI,CAAEe,EAAG,GACTC,WAAS,EACTC,KAAK,OACLC,QAAQ,WACRT,SAAUA,EACVC,UAAWA,EACXS,MAAOX,EACPX,GAAIA,EACJuB,SAAUf,EACVC,MAAOA,EACPC,WAAYA,EACZc,KAAMV,EAAe,OAAS,WAC9BW,UAAW,CACVC,MAAO,CACNC,cACC/B,EAAAA,EAAAA,KAACgC,EAAAA,EAAc,CAACC,SAAS,MAAKvC,UAC7BM,EAAAA,EAAAA,KAACkC,EAAAA,EAAU,CACVC,QA5ByBC,IAAMjB,GAAiBkB,IAAUA,IA6B1DC,YA3B0BC,IAChCA,EAAMC,gBAAgB,EA2BhBC,UAxBwBF,IAC9BA,EAAMC,gBAAgB,EAwBhBE,KAAK,MAAKhD,SAETwB,GAAelB,EAAAA,EAAAA,KAAC2C,EAAAA,EAAa,CAACC,MAAOnC,KAAgBT,EAAAA,EAAAA,KAAC6C,EAAAA,EAAU,CAACD,MAAOnC,WAQjF,C,wBC3DA,SAAgB,KAAO,yBCQjBqC,EAAoB,CAAEC,QAAQ,EAAOC,KAAM,IAOlC,SAASC,EAASxD,GAA8D,IAA7D,SAAEyD,GAAW,EAAK,qBAAEC,GAAsC1D,EAC3F,MAAM2D,GAAWC,EAAAA,EAAAA,QAAO,MAClBC,GAAcD,EAAAA,EAAAA,QAAO,MACrBE,GAAeF,EAAAA,EAAAA,QAAO,OACrBG,EAAYC,IAAiBrC,EAAAA,EAAAA,UAAS0B,IACtCY,EAAeC,IAAoBvC,EAAAA,EAAAA,UAAS0B,GAC7Cc,GAAWC,EAAAA,EAAAA,KACXC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MAMjB,SAASC,IACJR,EAAcX,QAAQY,EAAiBb,EAC5C,CAEA,SAASqB,EAAY5B,GACF,UAAdA,EAAM6B,KAAiBC,GAC5B,CAEA,SAASA,IACR,IAAIC,GAAQ,EACZ,MAAMC,EAAQnB,EAASoB,QAAQ7E,MACzB8E,EAAWnB,EAAYkB,QAAQ7E,MAiBrC,GAhBI4E,EAAMG,OAAS,EAClBjB,EAAcX,IAEdW,EAAc,CAAEV,QAAQ,EAAMC,KAAM,6PACpCsB,GAAQ,GAELG,EAASC,OAAS,GAAKD,EAASE,MAAM,qBACzChB,EAAiBb,GACbI,GAAYuB,IAAalB,EAAaiB,QAAQ7E,QACjDgE,EAAiB,CAAEZ,QAAQ,EAAMC,KAAM,6GACvCsB,GAAQ,KAGTX,EAAiB,CAAEZ,QAAQ,EAAMC,KAAM,wMACvCsB,GAAQ,GAELA,EAAO,CAAC,IAADM,EACV,IACChB,EAAST,EAAqB,CAAEoB,QAAOE,aACxC,CAAE,MAAO5D,GAIR,OAHAgE,QAAQC,IAAIjE,EAAMkE,SAClBtB,EAAc,CAAEV,QAAQ,EAAMC,KAAM,iJACpCW,EAAiB,CAAEZ,QAAQ,EAAMC,KAAM,2IAExC,CACAc,GAAuB,QAAdc,EAAAZ,EAASgB,aAAK,IAAAJ,OAAA,EAAdA,EAAgBK,WAAYC,SAASD,UAAY,IAC3D,CACD,CAEA,OACCE,EAAAA,EAAAA,MAAA,QAAMC,UAAWC,EAAOC,KAAMlF,IAAK8C,EAAW,YAAc,UAAY,OAAOxD,SAAA,EAC9EM,EAAAA,EAAAA,KAACqB,EAAAA,EAAS,CACTd,GAAI,CAAEe,EAAG,GACTC,WAAS,EACTG,MAAM,iCACNF,KAAK,OACLC,QAAQ,WACRE,SAAUyB,EACVvC,MAAO2C,EAAWT,OAClBjC,WAAY0C,EAAWR,KACvBhC,SAxDH,WACKwC,EAAWT,QAAQU,EAAcX,EACtC,EAuDG7B,UAAWkD,KAEZnE,EAAAA,EAAAA,KAACW,EAAa,CACbC,IAAK0C,EACLvC,MAAM,uCACNX,GAAG,YACHS,MAAO6C,EAAcX,OACrBjC,WAAY4C,EAAcV,MAASE,GAAY,wWAC/ClC,SAAUkD,EACVjD,UAAWkD,IAEXjB,IACAlD,EAAAA,EAAAA,KAACW,EAAa,CACbC,IAAK2C,EACLxC,MAAM,8FACNX,GAAG,YACHS,MAAO6C,EAAcX,OACrBjC,WAAY4C,EAAcV,KAC1BhC,SAAUkD,EACVjD,UAAWkD,KAEbnE,EAAAA,EAAAA,KAACuF,EAAAA,EAAM,CACN9D,QAAQ,YACR+D,KAAK,QACLjE,WAAS,EACTY,QAASkC,EAAS3E,SAEjBwD,EAAW,+GAAuB,qCAIvC,C,cC1Ge,SAASuC,IACvB,MAAO9F,EAAO+F,IAAYtE,EAAAA,EAAAA,UAAS,GAC7BuE,GAAOC,EAAAA,EAAAA,IAAeZ,GAASA,EAAMW,OACrC3B,GAAWC,EAAAA,EAAAA,MACXH,GAAWC,EAAAA,EAAAA,OAEjB8B,EAAAA,EAAAA,YAAU,KAAO,IAADjB,EACfc,GAAuB,QAAdd,EAAAZ,EAASgB,aAAK,IAAAJ,OAAA,EAAdA,EAAgBkB,eAAgB,GACjC,OAAJH,QAAI,IAAJA,GAAAA,EAAMI,SAASjC,EAAS,IAAI,GAE9B,IAMH,OACCqB,EAAAA,EAAAA,MAAA,OAAAzF,SAAA,EACCM,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACC,GAAI,CAAEyF,aAAc,EAAGC,YAAa,WAAYvG,UACpDyF,EAAAA,EAAAA,MAACe,EAAAA,EAAI,CAACC,UAAQ,EAACxG,MAAOA,EAAOqB,SAPXoF,CAAC7D,EAAuB8D,KAC5CX,EAASW,EAAS,EAMoC3G,SAAA,EACnDM,EAAAA,EAAAA,KAACsG,EAAAA,EAAG,CAAC/F,GAAI,CAAEgG,SAAU,IAAM7E,MAAM,2BAAOtB,GAAG,kBAC3CJ,EAAAA,EAAAA,KAACsG,EAAAA,EAAG,CAAC/F,GAAI,CAAEgG,SAAU,IAAM7E,MAAM,qEAActB,GAAG,uBAGpDJ,EAAAA,EAAAA,KAACR,EAAQ,CAACG,MAAOA,EAAOC,MAAO,EAAEF,UAChCM,EAAAA,EAAAA,KAACiD,EAAS,CAACE,qBAAsBqD,EAAAA,QAElCxG,EAAAA,EAAAA,KAACR,EAAQ,CAACG,MAAOA,EAAOC,MAAO,EAAEF,UAChCM,EAAAA,EAAAA,KAACiD,EAAS,CAACC,UAAQ,EAACC,qBAAsBsD,EAAAA,SAI9C,C","sources":["components/TabPanel/TabPanel.tsx","components/PasswordInput/PasswordInput.tsx","webpack://movie-portal/./src/components/LoginForm/LoginForm.module.css?4ac5","components/LoginForm/LoginForm.tsx","pages/AuthorizationPage.tsx"],"sourcesContent":["import { HTMLAttributes } from 'react';\r\nimport { Box } from '@mui/material';\r\n\r\ninterface TabPanelProps extends HTMLAttributes<HTMLDivElement> {\r\n\tchildren?: React.ReactNode;\r\n\tindex: number;\r\n\tvalue: number;\r\n}\r\n\r\nexport default function TabPanel({ children, value, index, ...props }: TabPanelProps) {\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`simple-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`simple-tab-${index}`}\r\n\t\t\t{...props}\r\n\t\t>\r\n\t\t\t{value === index && <Box sx={{ p: 3 }}>{children}</Box>}\r\n\t\t</div>\r\n\t);\r\n}","import { ChangeEventHandler, KeyboardEventHandler, RefObject, useState } from 'react';\r\nimport { VisibilityOff, Visibility } from '@mui/icons-material';\r\nimport { InputAdornment, IconButton, TextField } from '@mui/material';\r\n\r\ninterface PasswordInputProps {\r\n\tref: RefObject<HTMLInputElement>,\r\n\terror: boolean,\r\n\thelperText: string\r\n\tlable: string,\r\n\tid: string,\r\n\tonChange: ChangeEventHandler<HTMLInputElement>,\r\n\tonKeyDown: KeyboardEventHandler<HTMLDivElement>\r\n}\r\n\r\nconst iconStyle = { color: 'var(--fontcolor)' };\r\n\r\nexport default function PasswordInput({ ref, error, helperText, lable, id, onChange, onKeyDown }: PasswordInputProps) {\r\n\tconst [showPassword, setShowPassword] = useState(false);\r\n\r\n\tconst handleClickShowPassword = () => setShowPassword((show) => !show);\r\n\r\n\tconst handleMouseDownPassword = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\r\n\tconst handleMouseUpPassword = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\treturn (\r\n\t\t<TextField\r\n\t\t\tsx={{ m: 1 }}\r\n\t\t\tfullWidth\r\n\t\t\tname='user'\r\n\t\t\tvariant=\"outlined\"\r\n\t\t\tonChange={onChange}\r\n\t\t\tonKeyDown={onKeyDown}\r\n\t\t\tlabel={lable}\r\n\t\t\tid={id}\r\n\t\t\tinputRef={ref}\r\n\t\t\terror={error}\r\n\t\t\thelperText={helperText}\r\n\t\t\ttype={showPassword ? 'text' : 'password'}\r\n\t\t\tslotProps={{\r\n\t\t\t\tinput: {\r\n\t\t\t\t\tendAdornment: (\r\n\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tonClick={handleClickShowPassword}\r\n\t\t\t\t\t\t\t\tonMouseDown={handleMouseDownPassword}\r\n\t\t\t\t\t\t\t\tonMouseUp={handleMouseUpPassword}\r\n\t\t\t\t\t\t\t\tedge=\"end\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{showPassword ? <VisibilityOff style={iconStyle} /> : <Visibility style={iconStyle} />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t}}\r\n\t\t/>\r\n\t)\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"LoginForm_form__Axqez\"};","import { KeyboardEvent, useRef, useState } from 'react';\r\nimport { TextField, Button } from '@mui/material';\r\nimport PasswordInput from '../PasswordInput/PasswordInput';\r\nimport { useLocation, useNavigate } from 'react-router';\r\nimport { ActionCreatorWithOptionalPayload } from '@reduxjs/toolkit';\r\nimport { UserData } from '../../types/types';\r\nimport { useAppDispatch } from '../../hooks/useStore';\r\nimport styles from './LoginForm.module.css';\r\n\r\nconst defaultErrorState = { status: false, text: '' };\r\n\r\ninterface LoginFormProps {\r\n\tregister?: boolean,\r\n\tauthorizationHandler: ActionCreatorWithOptionalPayload<UserData>\r\n}\r\n\r\nexport default function LoginForm({ register = false, authorizationHandler }: LoginFormProps) {\r\n\tconst loginRef = useRef(null);\r\n\tconst passwordRef = useRef(null);\r\n\tconst password2Ref = useRef(null);\r\n\tconst [loginError, setLoginError] = useState(defaultErrorState);\r\n\tconst [passwordError, setPasswordError] = useState(defaultErrorState);\r\n\tconst dispatch = useAppDispatch();\r\n\tconst navigate = useNavigate();\r\n\tconst location = useLocation();\r\n\r\n\tfunction handleChangeLogin() {\r\n\t\tif (loginError.status) setLoginError(defaultErrorState);\r\n\t}\r\n\r\n\tfunction handleChangePassword() {\r\n\t\tif (passwordError.status) setPasswordError(defaultErrorState);\r\n\t}\r\n\r\n\tfunction handleEnter(event: KeyboardEvent<HTMLDivElement>) {\r\n\t\tif (event.key === 'Enter') validate();\r\n\t}\r\n\r\n\tfunction validate() {\r\n\t\tlet valid = true;\r\n\t\tconst login = loginRef.current.value;\r\n\t\tconst password = passwordRef.current.value;\r\n\t\tif (login.length > 2) {\r\n\t\t\tsetLoginError(defaultErrorState);\r\n\t\t} else {\r\n\t\t\tsetLoginError({ status: true, text: 'Логин должен содержать как минимум из 3 символов' });\r\n\t\t\tvalid = false;\r\n\t\t};\r\n\t\tif (password.length > 7 && password.match(/[a-z]\\d|\\d[a-z]/i)) {\r\n\t\t\tsetPasswordError(defaultErrorState);\r\n\t\t\tif (register && password !== password2Ref.current.value) {\r\n\t\t\t\tsetPasswordError({ status: true, text: 'Пароли не совпадают' });\r\n\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetPasswordError({ status: true, text: 'Пароль не соответствует требованиям' });\r\n\t\t\tvalid = false;\r\n\t\t};\r\n\t\tif (valid) {\r\n\t\t\ttry {\r\n\t\t\t\tdispatch(authorizationHandler({ login, password }));\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error.message);\r\n\t\t\t\tsetLoginError({ status: true, text: 'Неверный логин или пароль' });\r\n\t\t\t\tsetPasswordError({ status: true, text: 'Неверный логин или пароль' });\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tnavigate(location.state?.referrer || document.referrer || '/');\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<form className={styles.form} id={(register ? 'register-' : 'login-') + 'form'}>\r\n\t\t\t<TextField\r\n\t\t\t\tsx={{ m: 1 }}\r\n\t\t\t\tfullWidth\r\n\t\t\t\tlabel=\"Логин\"\r\n\t\t\t\tname='user'\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tinputRef={loginRef}\r\n\t\t\t\terror={loginError.status}\r\n\t\t\t\thelperText={loginError.text}\r\n\t\t\t\tonChange={handleChangeLogin}\r\n\t\t\t\tonKeyDown={handleEnter}\r\n\t\t\t/>\r\n\t\t\t<PasswordInput\r\n\t\t\t\tref={passwordRef}\r\n\t\t\t\tlable='Пароль'\r\n\t\t\t\tid='password1'\r\n\t\t\t\terror={passwordError.status}\r\n\t\t\t\thelperText={passwordError.text || (register && 'Пароль должен содержать как минимум 8 символов включая 1 букву и 1 цифру')}\r\n\t\t\t\tonChange={handleChangePassword}\r\n\t\t\t\tonKeyDown={handleEnter}\r\n\t\t\t/>\r\n\t\t\t{register &&\r\n\t\t\t\t<PasswordInput\r\n\t\t\t\t\tref={password2Ref}\r\n\t\t\t\t\tlable='Повторите пароль'\r\n\t\t\t\t\tid='password2'\r\n\t\t\t\t\terror={passwordError.status}\r\n\t\t\t\t\thelperText={passwordError.text}\r\n\t\t\t\t\tonChange={handleChangePassword}\r\n\t\t\t\t\tonKeyDown={handleEnter}\r\n\t\t\t\t/>}\r\n\t\t\t<Button\r\n\t\t\t\tvariant='contained'\r\n\t\t\t\tsize='large'\r\n\t\t\t\tfullWidth\r\n\t\t\t\tonClick={validate}\r\n\t\t\t>\r\n\t\t\t\t{register ? 'Зарегистрироваться' : 'Войти'}\r\n\t\t\t</Button>\r\n\t\t</form>\r\n\t)\r\n}","import { SyntheticEvent, useEffect, useState } from 'react';\r\nimport { Box, Tabs, Tab } from '@mui/material';\r\nimport TabPanel from '../components/TabPanel/TabPanel';\r\nimport LoginForm from '../components/LoginForm/LoginForm';\r\nimport { useLocation, useNavigate } from 'react-router';\r\nimport { createUser, logIn } from '../store/userSlice';\r\nimport { useAppSelector } from '../hooks/useStore';\r\n\r\nexport default function AuthorizationPage() {\r\n\tconst [value, setValue] = useState(0);\r\n\tconst user = useAppSelector(state => state.user);\r\n\tconst location = useLocation();\r\n\tconst navigate = useNavigate();\r\n\r\n\tuseEffect(() => {\r\n\t\tsetValue(location.state?.registration || 0);\r\n\t\tif (user?.isLogin) navigate('/');\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, []);\r\n\r\n\tconst handleChange = (event: SyntheticEvent, newValue: number) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n\t\t\t\t<Tabs centered value={value} onChange={handleChange}>\r\n\t\t\t\t\t<Tab sx={{ fontSize: 30 }} label=\"Вход\" id='simple-tab-0' />\r\n\t\t\t\t\t<Tab sx={{ fontSize: 30 }} label=\"Регистрация\" id='simple-tab-1' />\r\n\t\t\t\t</Tabs>\r\n\t\t\t</Box>\r\n\t\t\t<TabPanel value={value} index={0}>\r\n\t\t\t\t<LoginForm authorizationHandler={logIn} />\r\n\t\t\t</TabPanel>\r\n\t\t\t<TabPanel value={value} index={1}>\r\n\t\t\t\t<LoginForm register authorizationHandler={createUser} />\r\n\t\t\t</TabPanel>\r\n\t\t</div>\r\n\t)\r\n}"],"names":["TabPanel","_ref","children","value","index","props","_objectWithoutProperties","_excluded","_jsx","_objectSpread","role","hidden","id","concat","Box","sx","p","iconStyle","color","PasswordInput","ref","error","helperText","lable","onChange","onKeyDown","showPassword","setShowPassword","useState","TextField","m","fullWidth","name","variant","label","inputRef","type","slotProps","input","endAdornment","InputAdornment","position","IconButton","onClick","handleClickShowPassword","show","onMouseDown","event","preventDefault","onMouseUp","edge","VisibilityOff","style","Visibility","defaultErrorState","status","text","LoginForm","register","authorizationHandler","loginRef","useRef","passwordRef","password2Ref","loginError","setLoginError","passwordError","setPasswordError","dispatch","useAppDispatch","navigate","useNavigate","location","useLocation","handleChangePassword","handleEnter","key","validate","valid","login","current","password","length","match","_location$state","console","log","message","state","referrer","document","_jsxs","className","styles","form","Button","size","AuthorizationPage","setValue","user","useAppSelector","useEffect","registration","isLogin","borderBottom","borderColor","Tabs","centered","handleChange","newValue","Tab","fontSize","logIn","createUser"],"sourceRoot":""}